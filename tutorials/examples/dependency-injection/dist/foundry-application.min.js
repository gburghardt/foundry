/*! foundry 2014-05-14 */
;var RecentTasksModule=Module.Base.extend({prototype:{_ready:function(){Module.Base.prototype._ready.call(this);this.subscribe("task.added",this,"handleTaskAdded")},handleTaskAdded:function(b,c){var a=this.document.createElement("li");a.innerHTML=c.task;this.element.querySelector("ol").appendChild(a)}}});var SelectionModule=Module.Base.extend({prototype:{options:{selectedClass:"selected"},addItem:function(a){a.setAttribute("data-actions",this.controllerId+".toggle");this.element.querySelector("ol").appendChild(a)},getSelectedCount:function(){return this.element.querySelectorAll("ol>li."+this.options.selectedClass).length},toggle:function click(b,a,c){a.classList.toggle(this.options.selectedClass);this.notify("item.selectionSizeChanged")}}});var TaskListModule=Module.Base.extend({prototype:{selection:null,_ready:function(){Module.Base.prototype._ready.call(this);this.selection.listen("item.selectionSizeChanged",this,"handleItemSelectionSizeChanged")},destructor:function(){if(this.selection){this.selection.ignore("item.selectionSizeChanged",this);this.selection.destructor();this.selection=null}},handleItemSelectionSizeChanged:function(a,b){this.element.querySelector(".selection-count").innerHTML=this.selection.getSelectedCount()},add:function submit(f,c,g){f.stop();var e=this.element,b=e.elements.taskName,a=b.value;if(/^\s*$/.test(a)){alert("Please enter a task")}else{var d=this.document.createElement("li");d.innerHTML=a;this.selection.addItem(d);this.publish("task.added",{task:a,item:d})}b.value="";b.focus()}}});