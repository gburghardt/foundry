<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="edge">
		<title>Demo: Rendering Client Side Templates &mdash; Foundry</title>
	</head>
	<body>

		<div data-modules="postDetail" data-module-options='{"post_id": 1}'>Loading ...</div>

		<!-- Base Framework -->
		<script type="text/javascript" src="../../../js/foundry/v0.1.1/foundry.concat.js"></script>

		<!-- Client Side Template Libs -->
		<script type="text/javascript" src="../../../js/mustache.js/mustache.js"></script>
		<script type="text/javascript" src="../../../js/promise/src/promise.js"></script>
		<script type="text/javascript" src="../../../js/bloodhound/src/bloodhound.js"></script>
		<script type="text/javascript" src="../../../js/bloodhound/src/bloodhound/adapters/mustache_template.js"></script>
		<script type="text/javascript" src="../../../js/bloodhound/src/bloodhound/rendering_engines/dynamic_rendering_engine.js"></script>
		<script type="text/javascript" src="../../../js/bloodhound/src/bloodhound/view_providers/mustache_view_provider.js"></script>
		<script type="text/javascript" src="../../../js/bloodhound/src/bloodhound/view_resolvers/dynamic_view_resolver.js"></script>

		<!-- Application Files -->
		<script type="text/javascript" src="./post_detail_module.js"></script>

		<script type="text/javascript">

			var app = Foundry.run(function(dependencies, options) {
				dependencies.merge({
					viewProvider: {
						type: "Bloodhound.ViewProviders.MustacheViewProvider",
						singleton: true
					},
					viewResolver: {
						type: "Bloodhound.ViewResolvers.DynamicViewResolver",
						singleton: true,
						properties: {
							container: "document",
							provider: "viewProvider",
							templateUrlBase: { value: "." }
						}
					},
					renderingEngine: {
						type: "Bloodhound.RenderingEngines.DynamicRenderingEngine",
						singleton: true,
						properties: {
							viewResolver: "viewResolver"
						}
					},
					postDetail: {
						type: "PostDetailModule",
						parent: "module"
					}
				});

				// All modules will have this rendering engine available
				dependencies.module.properties.renderingEngine = "renderingEngine";
			});

		</script>

	</body>
</html>
