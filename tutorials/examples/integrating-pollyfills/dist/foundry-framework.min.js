/*! foundry 2014-05-14 */
;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(a,b){if(typeof exports==="object"&&exports){b(exports)}else{var c={};b(c);if(typeof define==="function"&&define.amd){define(c)}else{a.Mustache=c}}}(this,function(a){var f=/\s*/;var m=/\s+/;var k=/\S/;var i=/\s*=/;var o=/\s*\}/;var t=/#|\^|\/|>|\{|&|=|!/;var g=RegExp.prototype.test;function s(z,y){return g.call(z,y)}function h(y){return !s(k,y)}var v=Object.prototype.toString;var l=Array.isArray||function(y){return v.call(y)==="[object Array]"};function b(y){return typeof y==="function"}function e(y){return y.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function n(y){return String(y).replace(/[&<>"'\/]/g,function(z){return d[z]})}function r(y){if(!l(y)||y.length!==2){throw new Error("Invalid tags: "+y)}return[new RegExp(e(y[0])+"\\s*"),new RegExp("\\s*"+e(y[1]))]}function x(O,E){E=E||a.tags;O=O||"";if(typeof E==="string"){E=E.split(m)}var I=r(E);var A=new u(O);var G=[];var F=[];var D=[];var P=false;var N=false;function M(){if(P&&!N){while(D.length){delete F[D.pop()]}}else{D=[]}P=false;N=false}var B,z,H,J,C,y;while(!A.eos()){B=A.pos;H=A.scanUntil(I[0]);if(H){for(var K=0,L=H.length;K<L;++K){J=H.charAt(K);if(h(J)){D.push(F.length)}else{N=true}F.push(["text",J,B,B+1]);B+=1;if(J==="\n"){M()}}}if(!A.scan(I[0])){break}P=true;z=A.scan(t)||"name";A.scan(f);if(z==="="){H=A.scanUntil(i);A.scan(i);A.scanUntil(I[1])}else{if(z==="{"){H=A.scanUntil(new RegExp("\\s*"+e("}"+E[1])));A.scan(o);A.scanUntil(I[1]);z="&"}else{H=A.scanUntil(I[1])}}if(!A.scan(I[1])){throw new Error("Unclosed tag at "+A.pos)}C=[z,H,B,A.pos];F.push(C);if(z==="#"||z==="^"){G.push(C)}else{if(z==="/"){y=G.pop();if(!y){throw new Error('Unopened section "'+H+'" at '+B)}if(y[1]!==H){throw new Error('Unclosed section "'+y[1]+'" at '+B)}}else{if(z==="name"||z==="{"||z==="&"){N=true}else{if(z==="="){I=r(E=H.split(m))}}}}}y=G.pop();if(y){throw new Error('Unclosed section "'+y[1]+'" at '+A.pos)}return w(c(F))}function c(D){var A=[];var C,z;for(var B=0,y=D.length;B<y;++B){C=D[B];if(C){if(C[0]==="text"&&z&&z[0]==="text"){z[1]+=C[1];z[3]=C[3]}else{A.push(C);z=C}}}return A}function w(D){var F=[];var C=F;var E=[];var A,B;for(var z=0,y=D.length;z<y;++z){A=D[z];switch(A[0]){case"#":case"^":C.push(A);E.push(A);C=A[4]=[];break;case"/":B=E.pop();B[5]=A[2];C=E.length>0?E[E.length-1][4]:F;break;default:C.push(A)}}return F}function u(y){this.string=y;this.tail=y;this.pos=0}u.prototype.eos=function(){return this.tail===""};u.prototype.scan=function(A){var z=this.tail.match(A);if(z&&z.index===0){var y=z[0];this.tail=this.tail.substring(y.length);this.pos+=y.length;return y}return""};u.prototype.scanUntil=function(A){var z=this.tail.search(A),y;switch(z){case -1:y=this.tail;this.tail="";break;case 0:y="";break;default:y=this.tail.substring(0,z);this.tail=this.tail.substring(z)}this.pos+=y.length;return y};function q(z,y){this.view=z==null?{}:z;this.cache={".":this.view};this.parent=y}q.prototype.push=function(y){return new q(y,this)};q.prototype.lookup=function(y){var B;if(y in this.cache){B=this.cache[y]}else{var A=this;while(A){if(y.indexOf(".")>0){B=A.view;var C=y.split("."),z=0;while(B!=null&&z<C.length){B=B[C[z++]]}}else{B=A.view[y]}if(B!=null){break}A=A.parent}this.cache[y]=B}if(b(B)){B=B.call(this.view)}return B};function p(){this.cache={}}p.prototype.clearCache=function(){this.cache={}};p.prototype.parse=function(A,z){var y=this.cache;var B=y[A];if(B==null){B=y[A]=x(A,z)}return B};p.prototype.render=function(B,y,A){var C=this.parse(B);var z=(y instanceof q)?y:new q(y);return this.renderTokens(C,z,A,B)};p.prototype.renderTokens=function(G,y,E,I){var C="";var K=this;function z(L){return K.render(L,y,E)}var A,H;for(var D=0,F=G.length;D<F;++D){A=G[D];switch(A[0]){case"#":H=y.lookup(A[1]);if(!H){continue}if(l(H)){for(var B=0,J=H.length;B<J;++B){C+=this.renderTokens(A[4],y.push(H[B]),E,I)}}else{if(typeof H==="object"||typeof H==="string"){C+=this.renderTokens(A[4],y.push(H),E,I)}else{if(b(H)){if(typeof I!=="string"){throw new Error("Cannot use higher-order sections without the original template")}H=H.call(y.view,I.slice(A[3],A[5]),z);if(H!=null){C+=H}}else{C+=this.renderTokens(A[4],y,E,I)}}}break;case"^":H=y.lookup(A[1]);if(!H||(l(H)&&H.length===0)){C+=this.renderTokens(A[4],y,E,I)}break;case">":if(!E){continue}H=b(E)?E(A[1]):E[A[1]];if(H!=null){C+=this.renderTokens(this.parse(H),y,E,H)}break;case"&":H=y.lookup(A[1]);if(H!=null){C+=H}break;case"name":H=y.lookup(A[1]);if(H!=null){C+=a.escape(H)}break;case"text":C+=A[1];break}}return C};a.name="mustache.js";a.version="0.8.1";a.tags=["{{","}}"];var j=new p();a.clearCache=function(){return j.clearCache()};a.parse=function(z,y){return j.parse(z,y)};a.render=function(A,y,z){return j.render(A,y,z)};a.to_html=function(B,z,A,C){var y=a.render(B,z,A);if(b(C)){C(y)}else{return y}};a.escape=n;a.Scanner=u;a.Context=q;a.Writer=p}));(function(l,G,e){var F=G.documentElement,o=l.setTimeout,C=G.getElementsByTagName("script")[0],B={}.toString,f=[],c=0,g=function(){},t=("MozAppearance" in F.style),n=t&&!!G.createRange().compareNode,v=n?F:C.parentNode,E=l.opera&&B.call(l.opera)=="[object Opera]",A=!!G.attachEvent&&!E,j=t?"object":A?"script":"img",w=A?"script":j,q=Array.isArray||function(H){return B.call(H)=="[object Array]"},p=function(H){return Object(H)===H},r=function(H){return typeof H=="string"},b=function(H){return B.call(H)=="[object Function]"},i=[],z={},D={timeout:function(I,H){if(H.length){I.timeout=H[0]}return I}},d,m;function s(H){return(!H||H=="loaded"||H=="complete"||H=="uninitialized")}function h(H,I,P,N,J,M){var O=G.createElement("script"),K,L;N=N||m.errorTimeout;O.src=H;for(L in P){O.setAttribute(L,P[L])}I=M?u:(I||g);O.onreadystatechange=O.onload=function(){if(!K&&s(O.readyState)){K=1;I();O.onload=O.onreadystatechange=null}};o(function(){if(!K){K=1;I(1)}},N);J?O.onload():C.parentNode.insertBefore(O,C)}function a(H,I,P,N,J,M){var O=G.createElement("link"),K,L;N=N||m.errorTimeout;I=M?u:(I||g);O.href=H;O.rel="stylesheet";O.type="text/css";for(L in P){O.setAttribute(L,P[L])}if(!J){C.parentNode.insertBefore(O,C);o(I,0)}}function u(){var H=f.shift();c=1;if(H){if(H.t){o(function(){(H.t=="c"?m.injectCss:m.injectJs)(H.s,0,H.a,H.x,H.e,1)},0)}else{H();u()}}else{c=0}}function y(J,H,Q,I,O,S,R){R=R||m.errorTimeout;var P=G.createElement(J),M=0,N=0,L={t:Q,s:H,e:O,a:S,x:R};if(z[H]===1){N=1;z[H]=[]}function K(U){if(!M&&s(P.readyState)){L.r=M=1;!c&&u();P.onload=P.onreadystatechange=null;if(U){if(J!="img"){o(function(){v.removeChild(P)},50)}for(var T in z[H]){if(z[H].hasOwnProperty(T)){z[H][T].onload()}}}}}if(J=="object"){P.data=H}else{P.src=H;P.type=J}P.width=P.height="0";P.onerror=P.onload=P.onreadystatechange=function(){K.call(this,N)};f.splice(I,0,L);if(J!="img"){if(N||z[H]===2){v.insertBefore(P,n?null:C);o(K,R)}else{z[H].push(P)}}}function k(L,J,I,H,K){c=0;J=J||"j";if(r(L)){y(J=="c"?w:j,L,J,this["i"]++,I,H,K)}else{f.splice(this["i"]++,0,L);f.length==1&&u()}return this}function x(){var H=m;H.loader={load:k,i:0};return H}m=function(L){var K,M,J=this["yepnope"]["loader"];function H(P){var S=P.split("!"),X=i.length,R=S.pop(),U=S.length,V={url:R,origUrl:R,prefixes:S},Q,T,W;for(T=0;T<U;T++){W=S[T].split("=");Q=D[W.shift()];if(Q){V=Q(V,W)}}for(T=0;T<X;T++){V=i[T](V)}return V}function O(P){return P.split(".").pop().split("?").shift()}function I(Q,W,S,R,P){var U=H(Q),T=U.autoCallback,V=O(U.url);if(U.bypass){return}if(W){W=b(W)?W:W[Q]||W[R]||W[(Q.split("/").pop().split("?")[0])]}if(U.instead){return U.instead(Q,W,S,R,P)}else{if(z[U.url]){U.noexec=true}else{z[U.url]=1}S.load(U.url,((U.forceCSS||(!U.forceJS&&"css"==O(U.url))))?"c":e,U.noexec,U.attrs,U.timeout);if(b(W)||b(T)){S.load(function(){x();W&&W(U.origUrl,P,R);T&&T(U.origUrl,P,R);z[U.url]=2})}}}function N(R,P){var X=!!R.test,Y=X?R.yep:R.nope,T=R.load||R.both,Z=R.callback||g,Q=Z,S=R.complete||g,W,V;function U(aa,ab){if(!aa){!ab&&S()}else{if(r(aa)){if(!ab){Z=function(){var ac=[].slice.call(arguments);Q.apply(this,ac);S()}}I(aa,Z,P,0,X)}else{if(p(aa)){W=(function(){var ad=0,ac;for(ac in aa){if(aa.hasOwnProperty(ac)){ad++}}return ad})();for(V in aa){if(aa.hasOwnProperty(V)){if(!ab&&!(--W)){if(!b(Z)){Z[V]=(function(ac){return function(){var ad=[].slice.call(arguments);ac&&ac.apply(this,ad);S()}})(Q[V])}else{Z=function(){var ac=[].slice.call(arguments);Q.apply(this,ac);S()}}}I(aa[V],Z,P,V,X)}}}}}}U(Y,!!T);T&&U(T)}if(r(L)){I(L,0,J,0)}else{if(q(L)){for(K=0;K<L.length;K++){M=L[K];if(r(M)){I(M,0,J,0)}else{if(q(M)){m(M)}else{if(p(M)){N(M,J)}}}}}else{if(p(L)){N(L,J)}}}};m.addPrefix=function(H,I){D[H]=I};m.addFilter=function(H){i.push(H)};m.errorTimeout=10000;if(G.readyState==null&&G.addEventListener){G.readyState="loading";G.addEventListener("DOMContentLoaded",d=function(){G.removeEventListener("DOMContentLoaded",d,0);G.readyState="complete"},0)}l.yepnope=x();l.yepnope["executeStack"]=u;l.yepnope["injectJs"]=h;l.yepnope["injectCss"]=a})(this,document);
/*! foundry 2014-05-14 */
;var Oxydizr={};Oxydizr.FrontController=function FrontController(){this.events={};this.controllers={};this.handleEvent=this.handleEvent.bind(this);this.handleEnterpress=this.handleEnterpress.bind(this)};Oxydizr.FrontController.prototype={catchErrors:false,controllers:null,element:null,errorHandler:{handleError:function(b,a,d,c,g,f,e){console.error(b);console.log({controller:a,event:d,element:c,params:g,action:f,controllerId:e});return true}},events:null,constructor:Oxydizr.FrontController,destructor:function(){if(this.controllers){for(var b in this.controllers){if(this.controllers.hasOwnProperty(b)){this.unregisterController(this.controllers[b]);this.controllers[b]=null}}this.controllers=null}if(this.events){for(var a in this.events){if(this.events.hasOwnProperty(a)){this._removeEvent(this.element,a,this.events[a])}}this.events=null}this.element=null},init:function(a){if(a){this.element=a}if(!this.element){throw new Error("Missing required argument: element")}this.registerEvents("click","submit");return this},_addEvent:function(b,a,c){if(!this.events[a]){this.events[a]=c;this._addEventListener(b,c.name,c.handler,c.capture)}},_addEventListener:function(c,b,d,a){c.addEventListener(b,d,a)},_createDelegateId:function(){var a=1000;return function(){return String(++a)}}(),_getActions:function(b){var a=b.getAttribute("data-actions");if(!a||/^\s*$/.test(a)){return[]}else{return a.replace(/^\s+|\s+$/g,"").split(/[.\s+]/g)}},_getMethodFromAction:function(a,c,b){var d=null;if(a[c]&&a[c].name===(b.__type||b.type)){d=c}else{if(a.handleAction){d="handleAction"}}return d},_getParams:function(c,b){var a=b.getAttribute("data-action-params");return(a)?JSON.parse(a):{}},handleEnterpress:function(a){if(a.keyCode===13){a.__type="enterpress";this.handleEvent(a)}},_handleError:function(b,a,f,e,d,c,g){if(a&&a.handleActionError){return a.handleActionError(b,d,c,g,e,a,f)}else{if(this.errorHandler){return this.errorHandler.handleActionError(b,a,d,c,g,e,f)}}return false},handleEvent:function(a){this._patchEvent(a);this._propagateEvent(a.target,a);this._unpatchEvent(a)},_invokeAction:function(f,e,d,c,g){var a=this.controllers[f]||null,h=null;if(!a){d.stop();throw new Error("No controller registered for "+f)}else{if(h=this._getMethodFromAction(a,e,d)){if(this.catchErrors){try{a[h](d,c,g,e)}catch(b){d.stop();if(!this._handleError(b,a,f,e,d,c,g)){throw b}}}else{a[h](d,c,g,e)}}}},_patchEvent:function(a){a.__isStopped=false;a.__stopPropagation=a.stopPropagation;a.stopPropagation=function(){a.__stopPropagation();this.__isStopped=true};a.__stop=a.stop||null;a.stop=function(){if(this.__stop){this.__stop()}this.preventDefault();this.stopPropagation()}},_propagateEvent:function(h,a){var g=this._getActions(h),e=this._getParams(a,h),c,f,d;for(var j=0,b=g.length;j<b;j+=2){c=g[j];f=g[j+1];d=e[c+"."+f]||{};this._invokeAction(c,f,a,h,d);if(a.__isStopped){break}}if(a.__isStopped||h===this.element){}else{if(h.parentNode){this._propagateEvent(h.parentNode,a)}}},_registerEvent:function(a){var b={name:a,handler:this.handleEvent,capture:false};if(a==="enterpress"){b.name="keypress";b.handler=this.handleEnterpress}else{if(a==="focus"||a==="blur"){b.capture=true}}this._addEvent(this.element,a,b)},registerEvents:function(){for(var a=0,b=arguments.length;a<b;a++){this._registerEvent(arguments[a])}return this},registerController:function(a){var b=a.controllerId||(a.controllerId=this._createDelegateId());if(this.controllers[b]){throw new Error("Cannot register duplicate delegate Id: "+b)}this.controllers[b]=a;a.onControllerRegistered(this,b);return b},_removeEvent:function(b,a,c){if(this.events[a]){this._removeEventListener(b,c.name,c.handler,c.capture);this.events[a]=this.events[a].handler=null}},_removeEventListener:function(c,b,d,a){c.removeEventListener(b,d,a)},_unpatchEvent:function(a){a.stopPropagation=a.__stopPropagation;a.stop=a.__stop||null;a.__stop=a.__stopPropagation=a.__isStopped=null},unregisterController:function(a){var b=a.controllerId;if(!b||!this.controllers[a.controllerId]){return false}else{this.controllers[a.controllerId]=null;delete this.controllers[a.controllerId];a.onControllerUnregistered(this);return true}}};this.Hypodermic={};(function(a){var e=["applicationCache","console","document","localStorage","location","navigator","screen","sessionStorage"],c={global:a};for(var f=0,h,b=e.length;f<b;f++){h=e[f];if(h in a){try{c[h]=a[h]}catch(g){var j="Cannot seed global singletons with "+h+". Failed with error: "+g.message;if(a.console&&a.console.warn){a.console.warn(j)}else{setTimeout(function(){throw j},500)}}}}function d(k){if(!k){throw new Error("Missing required argument: configs")}var m=new Hypodermic.DependencyResolver(this),l=new Hypodermic.ObjectFactory(this,m),i=Object.create(c);i.container=this;this.resolve=function(q,o){var n=null,p=k[q],r={};if(i[q]){n=i[q]}else{if(!p){if(o){throw new Error("No configuration found for "+q)}}else{if(p.template){throw new Error("Cannot create resolve template config: "+q)}else{if(p.factory){n=l.createInstanceFromFactory(p)}else{n=l.createInstance(p,p.constructorArgs)}if(p.singleton){i[q]=n}m.injectDependencies(n,p,r);while(p=k[p.parent]){m.injectDependencies(n,p,r)}}}}return n}}a.Hypodermic.Container=d})(this);(function(c){function f(g){this.container=g}f.prototype={container:null,constructor:f,findDependency:function(i){var g=null,h;if(a(i)){g=this.container.resolve(i,true)}else{if("value" in i){g=i.value}else{throw new Error("No dependency value found. Missing one of 'id', 'value' or 'factory'")}}return g},injectDependencies:function(g,i,l){if(!i.properties){return}var k=i.properties,j,h,m;for(j in k){if(k.hasOwnProperty(j)&&!l[j]){m="set"+b(j);h=this.findDependency(k[j]);if(e(g[m])){g[m](h)}else{g[j]=h}l[j]=true}}}};c.Hypodermic.DependencyResolver=f;var d=Object.prototype.toString;function b(g){return g.charAt(0).toUpperCase()+g.substring(1,g.length)}function e(g){return d.call(g)==="[object Function]"}function a(g){return d.call(g)==="[object String]"}})(this);(function(global){function ObjectFactory(container,dependencyResolver){this.container=container;this.dependencyResolver=dependencyResolver}ObjectFactory.prototype={container:null,dependencyResolver:null,constructor:ObjectFactory,createInstance:function(config,constructorDependencies){if(!config.type){throw new Error("Missing required argument: config.type")}var Klass=this._getClassReference(config.type),instance=null,args=null;if(!Klass){throw new Error("Class "+config.type+" not found.")}else{if(Klass.constructor===Function){instance=Object.create(Klass.prototype);if(constructorDependencies){args=this._getConstructorArgs(constructorDependencies);Klass.apply(instance,args)}else{Klass.call(instance)}}else{instance=Klass}}return instance},createInstanceFromFactory:function(config){if(!config.factory.id){throw new Error("Missing required argument: config.factory.id")}var factoryInfo=config.factory,factory=this.container.resolve(factoryInfo.id,true),method=factoryInfo.method||"createInstance",args=[],dependency,i,length;if(factoryInfo.args&&factoryInfo.args.length){for(i=0,length=factoryInfo.args.length;i<length;i++){args.push(this.dependencyResolver.findDependency(factoryInfo.args[i]))}}else{args.push(factoryInfo.type)}if(!factory[method]){throw new Error("No method called "+method+" exists on the factory object registered as "+factoryInfo.id)}dependency=factory[method].apply(factory,args);return dependency},_getClassReference:function(className){var Klass=_classCache[className]||null;if(!Klass&&/^[a-zA-Z][\w.$]+$/.test(className)){try{Klass=global.eval(className)}catch(error){Klass=null}}if(Klass){_classCache[className]=Klass}return Klass},_getConstructorArgs:function(dependencies){var args=[];for(var i=0,length=dependencies.length;i<length;i++){args.push(this.dependencyResolver.findDependency(dependencies[i]))}return args}};global.Hypodermic.ObjectFactory=ObjectFactory;var _classCache={};var conditionalClasses=["Array","Boolean","Date","document","DocumentFragment","DOMParser","Error","FileReader","Function","location","navigator","Number","Object","RegExp","String","XMLHttpRequest"];var i,length,x;for(i=0,length=conditionalClasses.length;i<length;i++){x=conditionalClasses[i];if(global[x]!==undefined){_classCache[x]=global[x]}}})(this);this.Module=this.Module||{};(function(){function Factory(){}Factory.prototype={objectFactory:null,constructor:Factory,destructor:function destructor(){this.objectFactory=null},getInstance:function getInstance(type){var instance=null,Klass=null;if(this.objectFactory){instance=this.objectFactory.getInstance(type)}if(!instance){if(/^[a-zA-Z][a-zA-Z0-9.]+[a-zA-Z0-9]$/.test(type)){try{Klass=eval(type)}catch(error){throw new Error("Class name "+type+" does not exist")}if(!Klass){throw new Error("Class name "+type+" does not exist")}else{if(typeof Klass!=="function"){throw new Error("Class name "+type+" is not a constructor function")}}instance=new Klass()}else{throw new Error("Cannot instantiate invalid type: "+type)}}return instance}};Module.Factory=Factory})();Module.FrontControllerModuleObserver=function FrontControllerModuleObserver(a){this.frontController=a||null};Module.FrontControllerModuleObserver.prototype={frontController:null,constructor:Module.FrontControllerModuleObserver,_ensureControllerId:function(a){a.controllerId=a.controllerId||a.options.controllerId||a.guid},onModuleCreated:function(b,a,c){this._ensureControllerId(b)},onSubModuleCreated:function(b,a,c){this.frontController.registerController(b)},onModuleRegistered:function(a,b){this.frontController.registerController(a)},onModuleUnregistered:function(a){this.frontController.unregisterController(a)}};(function(){function i(){this.init=F;this.destructor=r;this.setElement=C;this.setManager=o;this.setOptions=H;var w=this,k=false,y={resizeTimeout:250,scrollTimeout:250},K=null,n=null,N=null,v=null,I=null,G=null,M=null,x=0,u=0,q=0,L=0;function F(){if(k){throw new Error("Cannot re-initialize Module.LazyLoader.")}else{if(!N){throw new Error("Missing required property: manager. lazyLoader.setManager(...) to fix this error")}else{if(!v){throw new Error("Missing required property: element. lazyLoader.setElement(...) to fix this error")}}}z();D();if(!K.scrollTop&&!K.scrollLeft){K=null}k=true;return w}function D(){var R=v.querySelectorAll("[data-module-lazyload]"),Q,P;var O=d.create(A());for(Q=0;Q<R.length;Q++){P=R[Q];if(O.isVisible(P)){p(P,"scrollto")}}}function p(P,Q){var O=P.getAttribute("data-module-lazyload");if(O==="any"||new RegExp(Q).test(O)){if(N.createModules(P,true).length){P.removeAttribute("data-module-lazyload");P.setAttribute("data-module-lazyloaded",O)}}P=null}function r(){if(v){J();v=I=K=G=null}if(n){clearTimeout(n);n=null}if(M){clearTimeout(M);M=null}N=y.scrollElement=y=w=null}function B(P,O,Q){if(O==="resize"){Q.oldresize=P.onresize||null;P.onresize=Q}else{if(P.addEventListener){P.addEventListener(O,Q,true)}else{if(O==="scroll"){P.onscroll=Q}else{P.attachEvent("on"+O,Q)}}}}function z(){B(v,"mouseover",l);B(I,"scroll",j);B(G,"resize",s)}function A(){if(K===null){if(I.body.scrollTop||I.body.scrollLeft){K=I.body}else{K=I.documentElement}}return K}function l(O){O=O||window.event;O.target=O.target||O.srcElement;if(O.target.getAttribute("data-module-lazyload")){p(O.target,O.type)}}function j(O){E(I,"scroll",j);if(n){clearInterval(n)}n=setInterval(t,y.scrollTimeout)}function t(){var Q=A(),P=Q.scrollLeft,O=Q.scrollTop;if(P!=x||O!=u){clearInterval(n);B(I,"scroll",j);x=P;u=O;D()}}function s(O){E(G,"resize",s);if(M){clearInterval(M)}M=setInterval(m,y.resizeTimeout)}function m(){var O=I.documentElement.clientHeight,P=I.documentElement.clientWidth;if(P!==L||O!==q){clearInterval(M);B(G,"resize",s);q=O;L=P;D()}}function E(P,O,Q){if(O==="resize"){P.onresize=Q.oldresize||null;Q.oldresize=null}else{if(P.removeEventListener){P.removeEventListener(O,Q,true)}else{if(O==="scroll"){P.onscroll=null}else{P.detachEvent("on"+O,Q)}}}}function J(){E(v,"mouseover",l);E(I,"scroll",j);E(G,"resize",s)}function C(O){v=O;I=v.ownerDocument;G=I.defaultView;O=null;return w}function o(O){N=O;O=null;return w}function H(P){if(P){for(var O in P){if(P.hasOwnProperty(O)){y[O]=P[O]}}}P=null;return w}}function d(){}d.prototype={bottom:0,height:0,left:0,right:0,top:0,width:0,constructor:d,isBottomInBounds:function h(j){return(j.top+j.height<=this.top+this.height&&j.top+j.height>this.top)?true:false},isLeftInBounds:function c(j){return(j.left>=this.left&&j.left<this.left+this.width)?true:false},isRightInBounds:function f(j){return(j.left+j.width<=this.left+this.width&&j.left+j.width>this.left)?true:false},isTopInBounds:function a(j){return(j.top>=this.top&&j.top<this.top+this.height)?true:false},isVisible:function g(k){var l=false;var j=this._getPosition(k);if((this.isRightInBounds(j)||this.isLeftInBounds(j))&&(this.isTopInBounds(j)||this.isBottomInBounds(j))){l=true}return l},_getPosition:function b(k){var l=k.offsetParent;var j={top:k.offsetTop,left:k.offsetLeft,width:k.offsetWidth,height:k.offsetHeight};while(l=l.offsetParent){j.top+=l.offsetTop;j.left+=l.offsetLeft}return j}};d.create=function e(k){var j=new this();j.top=k.scrollTop;j.left=k.scrollLeft;j.width=k.clientWidth;j.height=k.clientHeight;j.right=k.offsetWidth-(j.left+j.width);j.bottom=k.offsetHeight-j.top-j.height;return j};Module.LazyLoader=i})();(function(){function b(){}b.prototype={baseClassName:"module",defaultModule:null,defaultModuleFocused:false,moduleObserver:{onModuleCreated:function(q,p,r){},onSubModuleCreated:function(q,p,r){},onModuleRegistered:function(p,q){},onModuleUnregistered:function(p){}},provider:null,registry:null,groups:null,constructor:Module.Manager,destructor:function m(p){if(Module.manager===this){Module.manager=null}if(this.registry){this._destroyRegistry(p)}if(this.groups){this._destroyGroups()}if(this.provider){if(p){this.provider.destructor()}this.provider=null}if(this.lazyLoader){this.lazyLoader.destructor();this.lazyLoader=null}},_destroyGroups:function d(){var q,s,p,r;for(q in this.groups){if(this.groups.hasOwnProperty(q)){s=this.groups[q];for(p=0,r=s.length;p<r;p++){s[p]=null}this.groups[q]=null}}this.groups=null},_destroyRegistry:function l(r){var p,q;for(p in this.registry){if(this.registry.hasOwnProperty(p)){q=this.registry[p];this.moduleObserver.onModuleUnregistered(q.module);if(r){q.module.destructor(true)}q.module=null;this.registry[p]=null}}this.registry=null},init:function n(){this.provider=this.provider||new Module.Provider();this.provider.factory=this.provider.factory||new Module.Factory();this.provider.manager=this;this.provider.moduleObserver=this.moduleObserver;this.registry=this.registry||{};this.groups=this.groups||{};Module.manager=this;return this},eagerLoadModules:function o(r){var q=r.querySelectorAll("[data-modules]"),p=0;for(p;p<q.length;p++){this.createModules(q[p])}q=null;return this},lazyLoadModules:function e(q,p){this.lazyLoader=(this.lazyLoader||new Module.LazyLoader()).setManager(this).setElement(q).setOptions(p).init();q=p=null;return this},createModule:function j(r,t,p,s){var q=this.provider.createModule(r,t,p);if(s){this.registerModule(t,q)}r=p=null;return q},createModules:function c(r,s){if(!r){throw new Error("Missing required argument: element")}else{if(!s&&r.getAttribute("data-module-lazyload")){return[]}else{if(r.getAttribute("data-module-property")){return[]}}}var p=new Module.MetaData(r),q=[];if(p.mediaMatches()){this.provider.createModules(p,function(v,u,w,t){q.push(v);this.registerModule(w,v);v.init()},this);this.markModulesCreated(r,p)}p=r=null;return q},focusDefaultModule:function f(p){if(this.defaultModule&&!this.defaultModuleFocused){this.defaultModuleFocused=true;this.defaultModule.focus(p)}},initModuleInContainer:function i(s,p,r,y,v,q){var u=new Date();var x={guid:q.guid,createdAt:u,timestamp:u.getTime(),controllerId:q.controllerId},w;if(r.renderData){for(w in r.renderData){if(r.renderData.hasOwnProperty(w)){x[w]=r.renderData[w]}}}var t=y.innerHTML.replace(/#\{([-.\w]+)\}/g,function(z,A){return x[A]||""});s.className+=(" "+this.baseClassName+" "+r.className).replace(/\s{2,}/g," ");s.innerHTML=t;if(r.insert==="top"&&p.firstChild){p.insertBefore(s,p.firstChild)}else{p.appendChild(s)}this.registerModule(v,q);q.init();if(r.autoFocus){q.focus(!!r.autoFocusAnything)}},markModulesCreated:function g(q,p){q.setAttribute("data-modules-created",p.types.join(" "));q.removeAttribute("data-modules");q=p=null},registerModule:function a(q,p){if(p.guid===undefined||p.guid===null){throw new Error("Cannot register module "+q+" without a guid property")}else{if(this.registry[p.guid]){throw new Error("Module "+p.guid+" has already been registered")}}this.registry[p.guid]={module:p,type:q};if(!this.groups[q]){this.groups[q]=[]}this.groups[q].push(p);this.moduleObserver.onModuleRegistered(p,q);p=null},unregisterModule:function h(s){if(!s.guid||!this.registry[s.guid]){s=null;return false}var q=s.guid,t=this.registry[q].type,v=this.groups[t],p=false;this.registry[q].module=null;this.registry[q]=null;delete this.registry[q];if(v){for(var r=0,u=v.length;r<u;r++){if(v[r]===s){v.splice(r,1);p=true;this.moduleObserver.onModuleUnregistered(s);break}}}s=v=null;return p},setDefaultModule:function k(p){if(!this.defaultModule){this.defaultModule=p}p=null}};Module.Manager=b})();(function(d){function a(f){this.options=null;this.types=[];if(f){this.setElement(f)}}a.prototype={element:null,media:null,options:null,types:null,constructor:a,forEach:function e(m,j){var h=0,l=this.types.length,f,k,g;if(l===1){m.call(j,this.element,this.types[0],this.options,0,this)}else{for(h;h<l;++h){k=this.types[h];g=this.options[k]||{};f=m.call(j,this.element,k,g,h,this);if(f===false){break}}}},mediaMatches:function c(){if(!d.matchMedia){throw new Error("This browser does not support JavaScript media queries. Please include a polyfill (https://github.com/paulirish/matchMedia.js)")}if(this.media){console.info("Match media: "+this.media,d.matchMedia(this.media).matches)}return this.media===null||d.matchMedia(this.media).matches},setElement:function b(h){this.element=h;var g=h.getAttribute("data-modules"),f=h.getAttribute("data-module-options");if(!g){throw new Error("Missing required attribute data-modules on "+h.nodeName+"."+h.className.split(/\s+/g).join(".")+"#"+h.id)}this.types=g.replace(/^\s+|\s+$/g,"").split(/\s+/g);this.options=f?JSON.parse(f):{};this.media=h.getAttribute("data-module-media")}};d.Module.MetaData=a})(this);(function(){function f(){}f.prototype={factory:null,manager:null,moduleObserver:null,subModulesEnabled:true,constructor:f,destructor:function d(g){if(g&&this.factory){this.factory.destructor()}this.factory=this.manager=null},_createModuleClass:function b(g){return"module "+g.charAt(0).toLowerCase()+g.slice(1,g.length).replace(/(\.[A-Z])/g,function(i,h){return"-"+h.replace(/\./g,"").toLowerCase()}).replace(/Module$/,"").replace(/^\s+|\s+$/g,"")},createModule:function c(i,k,g){var h=this.factory.getInstance(k);var j=this._createModuleClass(k);i.className+=i.className?" "+j:j;h.setElement(i);h.setOptions(g);if(g.defaultModule){this.manager.setDefaultModule(h)}this.moduleObserver.onModuleCreated(h,i,k);if(this.subModulesEnabled&&!g.subModulesDisabled){this._createSubModules(h)}return h},createModules:function c(g,k,j){var h=[],i,k=k||function(){};g.forEach(function(m,n,l){i=this.createModule(m,n,l);h.push(i);k.call(j,i,m,n,l)},this);k=j=i=null;return h},_createSubModules:function a(l){var k=l.element.getElementsByTagName("*"),m=k.length,j=0,h,g;for(j;j<m;j++){h=k[j];g=h.getAttribute("data-module-property");if(g){this._createSubModuleProperty(l,g,h)}}},_createSubModuleProperty:function e(k,i,j){var g=new Module.MetaData(j),h;if(g.types.length>1){throw new Error("Sub module elements cannot have more than one type specified in data-modules")}h=this.createModule(j,g.types[0],g.options);this.moduleObserver.onSubModuleCreated(h,j,g.types[0]);h.init();if(k[i]===null){k[i]=h}else{if(k[i] instanceof Array){if(!k.hasOwnProperty(i)){k[i]=[]}k[i].push(h)}else{throw new Error("Cannot create sub module property '"+i+"'. Property is neither null nor an Array on the parent module.")}}this.manager.markModulesCreated(j,g);h=g=j=null}};Module.Provider=f})();var Foundry={version:"0.1.1"};Foundry.run=function(f){f=f||function(){};var c={application:{type:"Foundry.Application",singleton:true,properties:{container:"container",dispatcher:"eventDispatcher",frontController:"frontController",moduleManager:"moduleManager"}},frontController:{type:"Oxydizr.FrontController",singleton:true},eventDispatcher:{type:"Beacon.Dispatcher",singleton:true},objectFactory:{type:"Foundry.ModuleFactory",singleton:true,properties:{container:"container"}},moduleFactory:{type:"Module.Factory",singleton:true,properties:{objectFactory:"objectFactory"}},moduleProvider:{type:"Module.Provider",singleton:true,properties:{factory:"moduleFactory"}},moduleManager:{type:"Module.Manager",singleton:true,properties:{provider:"moduleProvider",moduleObserver:"moduleObserver"}},moduleObserver:{type:"Module.FrontControllerModuleObserver",properties:{frontController:"frontController"}},module:{template:true,properties:{elementStore:"elementStore",eventDispatcher:"eventDispatcher"}},elementStore:{type:"ElementStore"},merge:function(h){for(var g in h){if(h.hasOwnProperty(g)){this[g]=h[g]}}return this}};var b={autoInit:true},d=f(c,b)||document.documentElement,a=new Hypodermic.Container(c),e=a.resolve("application");if(b.autoInit){e.init(d,b)}else{e.setElement(d);e.setOptions(b)}return e};Foundry.Application=function(){this.options={eagerLoadModules:true,focusAnythingInDefaultModule:false,handleActionErrors:true,handleApplicationErrors:true,lazyLoadModules:false,subModulesDisabled:false}};Foundry.Application.prototype={dispatcher:null,document:null,element:null,errorHandler:null,eventsController:null,frontController:null,moduleManager:null,newModuleController:null,options:null,window:null,constructor:Foundry.Application,init:function(c,b){if(c){this.setElement(c)}if(b){this.setOptions(b)}this._initErrorHandling();try{this.frontController.init(this.element);this._initEventsController();this._initNewModuleController();this._initModuleManager();this.dispatcher.publish("application.ready",this)}catch(a){if(!this.errorHandler||!this.errorHandler.handleError(a)){throw a}}return this},_initErrorHandling:function(){if(this.options.handleApplicationErrors){this.errorHandler=this.errorHandler||new Foundry.ErrorHandler();this.errorHandler.init(this,this.window);if(!this.frontController.errorHandler&&this.options.handleActionErrors){this.frontController.errorHandler=this.errorHandler}}},_initEventsController:function(){this.eventsController=this.eventsController||new Foundry.ApplicationEventsController(this.dispatcher);this.frontController.registerController(this.eventsController)},_initModuleManager:function(){this.moduleManager.init();if(this.options.eagerLoadModules){this.moduleManager.eagerLoadModules(this.element)}if(this.options.lazyLoadModules){this.moduleManager.lazyLoadModules(this.element)}this.moduleManager.focusDefaultModule(this.options.focusAnythingInDefaultModule)},_initNewModuleController:function(){var a=this.newModuleController||new Foundry.NewModuleController();a.dispatcher=this.dispatcher;a.document=this.document;a.frontController=this.frontController;a.moduleManager=this.moduleManager;a.init();this.newModuleController=a},destructor:function(){this.dispatcher.publish("application.destroy",this);this.moduleManager.destructor(true);this.errorHandler.destructor();this.eventsController.destructor();this.newModuleController.destructor();this.frontController.destructor();this.dispatcher.destructor();this.newModuleController=this.eventsController=this.dispatcher=this.frontController=this.moduleManager=this.errorHandler=this.element=this.document=this.window=this.logger=this.options=null},setElement:function(a){this.element=a;this.document=a.ownerDocument;this.window=this.document.defaultView},setOptions:function(a){for(var b in a){if(a.hasOwnProperty(b)){this.options[b]=a[b]}}}};Foundry.ApplicationEventsController=function(a){this.dispatcher=a};Foundry.ApplicationEventsController.prototype={controllerId:"events",dispatcher:null,frontController:null,constructor:Foundry.ApplicationEventsController,destructor:function(){if(this.frontController){this.frontController.unregisterController(this)}this.dispatcher=this.frontController=null},onControllerRegistered:function(b,a){this.frontController=b},onControllerUnregistered:function(a){},publishEvent:function click(b,a,c){if(!c.event){throw new Error("Missing required argument params.event")}b.stop();this.dispatcher.publish(c.event,a,c.data||{})}};Foundry.ErrorHandler=function(){};Foundry.ErrorHandler.prototype={application:null,logger:window.console||null,window:null,constructor:Foundry.ErrorHandler,destructor:function(){if(this.window){this.window.onerror=null}this.application=this.logger=this.window=null},init:function(a,b){this.application=a;this.window=b;this.window.onerror=this.handleError.bind(this)},_getErrorObject:function(errorMessage){var info=errorMessage.match(/^(([A-Za-z_][A-Za-z0-9._]*):)?(.+$)/),error=null,className,message,Klass;if(!info){error=new Error(message)}else{className=info[2]||"Error";message=(info[3]||errorMessage).replace(/^\s+|\s+$/g,"");if(/^[A-Za-z_][A-Za-z0-9._]*$/.test(className)){try{Klass=eval(className);error=new Klass(message)}catch(error){throw new Error("Class '"+className+"' is either not found or not an object constructor function")}}else{error=new Error(message)}}return error},handleActionError:function(b,d,c,g,f,a,e){if(this.logger){this.logger.error(b);this.logger.debug({error:b,event:d,element:c,params:g,action:f,controller:a,controllerId:e})}else{throw b}},handleError:function(b){var a=typeof b==="string"?this._getErrorObject(b):b;return this._handleError(a)},_handleError:function(a){if(this.logger){this.logger.error(a);return true}return false}};Foundry.ModuleFactory=function ModuleFactory(){};Foundry.ModuleFactory.prototype={container:null,constructor:Foundry.ModuleFactory,destructor:function(){this.container=null},getInstance:function(a){return this.container.resolve(a)}};Foundry.ModuleObserver=function(a){this.frontController=a||null};Foundry.ModuleObserver.prototype={frontController:null,constructor:Foundry.ModuleObserver,destructor:function(){this.frontController=null},onModuleCreated:function(b,a,c){b.controllerId=b.options.controllerId||b.guid},onModuleRegistered:function(a,b){this.frontController.registerController(a)},onModuleUnregistered:function(a){this.frontController.unregisterController(a)}};Foundry.NewModuleController=function(){};Foundry.NewModuleController.prototype={controllerId:"newModules",dispatcher:null,document:null,frontController:null,moduleManager:null,constructor:Foundry.NewModuleController,destructor:function(){if(this.dispatcher){this.dispatcher.unsubscribe(this)}if(this.frontController){this.frontController.unregisterController(this)}this.dispatcher=this.document=this.moduleManager=this.frontController=null},init:function(){this.dispatcher.subscribe(this.controllerId+".createModule",this,"handleCreateModule");this.frontController.registerController(this)},createModule:function click(b,a,c){b.stop();this._createModuleFromConfig(c);b=a=c=null},_createModuleFromConfig:function(c){if(!c.module){throw new Error("Missing required config.module")}else{if(!c.module.type){throw new Error("Missing required config.module.type")}else{if(!c.module.template){throw new Error("Missing required config.module.template for type: "+c.module.type)}}}c.module.options=c.module.options||{};c.container=c.container||{};c.container.insert=c.container.insert||"top";c.element=c.element||{};c.element.tag=c.element.tag||"div";var e=null;var b=null;var a="script[data-template="+c.module.template+"]";var f=this.document.querySelector(a);var d=this.document.createElement(c.element.tag);if(!f){throw new Error("Failed to find new module template using selector: "+a)}if(c.container.selector){b=this.document.querySelector(c.container.selector)}else{b=this.document.getElementsByTagName("body")[0]}if(!b){throw new Error("Failed to find module container with selector: "+(c.container.selector||"body"))}e=this.moduleManager.createModule(d,c.module.type,c.module.options||{});this.moduleManager.initModuleInContainer(d,b,c.container,f,c.module.type,e);e.focus();d=f=c=b=null;return e},handleCreateModule:function(a){this._createModuleFromConfig(a.data);return false},onControllerRegistered:function(b,a){},onControllerUnregistered:function(a){}};
/*! foundry 2014-05-14 */
;Foundry.pollyfill=function(){return new Foundry.PollyfillPromise(Array.prototype.slice.call(arguments))};Foundry.PollyfillPromise=function PollyfillPromise(a){this.callbacks={afterAll:[],afterEach:[]};this.tests=a||[]};Foundry.PollyfillPromise.prototype={callbacks:null,tests:null,constructor:Foundry.PollyfillPromise,afterAll:function(b,a){this.callbacks.afterAll.push({func:b,context:a||null});return this},afterEach:function(b,a){this.callbacks.afterEach.push({func:b,context:a||null});return this},fullfill:function(){var b=arguments[0],a=Array.prototype.slice.call(arguments,1),e=this.callbacks[b]||null,f,c,d;if(!b){throw new Error("Missing required argument: name")}else{if(!e){throw new Error("Cannot fullfill invalid promise: "+b)}}for(c=0,d=e.length;c<d;c++){f=e[c];f.func.apply(f.context,a)}},start:function(){throw new Error("Not Implemented!")}};Foundry.PollyfillPromise.prototype.start=function(){var c=0,f=this.tests.length,a=c,e=this,h;for(c;c<f;c++){h=this.tests[c];h.callback=g;h.complete=b;yepnope(h)}function b(){if(++a===f){e.fullfill("afterAll",arguments)}}function g(){e.fullfill("afterEach",arguments)}function d(){h=e=null}};(function(c){c.Module=c.Module||{};var a=0;function b(){this.initialize()}b.setDefaultModule=function(d){Module.manager.setDefaultModule(d)};b.unregister=function(d){if(!Module.manager){return}Module.manager.unregisterModule(d)};b.prototype={controllerId:null,document:null,element:null,guid:null,_isLoading:false,window:null,constructor:b,initialize:function(){this.guid=++a;this.options={}},init:function(d,e){if(d){this.setElement(d)}if(e){this.setOptions(e)}if(this.options.defaultModule){b.setDefaultModule(this)}return this},destructor:function(d){b.unregister(this);if(!d&&this.element&&this.element.parentNode){this.element.parentNode.removeChild(this.element)}this.element=this.options=this.document=this.window=null},focus:function(f){var e,g=/checkbox|radio|submit|button|image|reset/,d=["textarea","select","input[type=text]","input[type=password]","input[type=checkbox]","input[type=radio]","input[type=email]","input[type=number]","input[type=search]","input[type=url]"];if(f){d.push("a","button","input[type=submit]","input[type=button]","input[type=image]","input[type=reset]")}e=this.element.querySelector(d.join(", "));if(e&&e.focus){e.focus();if(e.select&&!g.test(e.type)){e.select()}}e=null},_loading:function(d){(d||this.element).classList.add("loading");this._isLoading=true;d=null},_loaded:function(d){(d||this.element).classList.remove("loading");this._isLoading=false;d=null},onControllerRegistered:function(e,d){},onControllerUnregistered:function(d){},setElement:function(d){this.element=typeof d==="string"?document.getElementById(d):d;if(!this.element){throw new Error("Could not find element: "+d)}this.document=this.element.ownerDocument;this.window=this.document.defaultView||this.document.parentWindow},setOptions:function(e){for(var d in e){if(e.hasOwnProperty(d)){this.options[d]=e[d]}}e=null}};c.Module.Base=b})(this);
/*! module-utils 2014-05-14 */
;
/*! module-utils 2014-05-14 */
(function(d){var e=d.Object.prototype.toString;function c(h){return e.call(h)==="[object Array]"}function g(k,h,j){for(var i in k){if(k.hasOwnProperty(i)&&(!j||!h.hasOwnProperty(i))){h[i]=k[i]}}}function b(h,l){if(!l){throw new Error("Missing required argument: Klass")}h=c(h)?h:[h];var j=0,k=h.length;for(j;j<k;j++){if(!h[j]){throw new Error("Mixin at index "+j+" is null or undefined")}l.include(h[j])}}function a(h){var i,j=this;if(h.self){g(h.self,j,true)}if(h.prototype){g(h.prototype,j.prototype,true)}if(h.includes){b(h.includes,j)}if(h.included){h.included(j)}h=null}function f(o){o=o||{};var m,l,n,k=this;var j=function j(){this.initialize.apply(this,arguments)};g(k,j);if(o.self){g(o.self,j)}j.prototype=Object.create(k.prototype);if(o.prototype){g(o.prototype,j.prototype)}if(o.includes){b(o.includes,j)}j.prototype.initialize=j.prototype.initialize||function h(){};j.prototype.constructor=j;k=o=null;return j}if(!d.Function.prototype.include){d.Function.prototype.include=a}if(!d.Function.prototype.extend){if(d.Object.extend){d.Object._extend=f}d.Function.prototype.extend=f}})(this);function Callbacks(b,a){if(b){this.context=b;this.types=a||{}}}Callbacks.prototype={context:null,types:null,destructor:function destructor(){this.context=this.types=null},add:function add(a,b){if(!this.types[a]){this.types[a]=[]}this.types[a].push(b);return this},execute:function execute(b){if(!this.types[b]){return true}var a=Array.prototype.slice.call(arguments,1,arguments.length);var f,c=0,d=this.types[b].length;var e=true;for(c;c<d;c++){f=this.types[b][c];if(!this.context[f]){throw new Error("No callback method found: "+f)}if(this.context[f].apply(this.context,a)===false){e=false;break}}return e},remove:function remove(b,e){if(!this.types[b]){return}var c=0,d=this.types[b].length,a;for(c;c<d;c++){if(e===this.types[b][c]){this.types[b].splice(c,1);break}}return this}};Callbacks.Utils={self:{addCallback:function addCallback(a,b){this.prototype.callbacks=this.prototype.callbacks||{};if(!this.prototype.callbacks[a]){this.prototype.callbacks[a]=[]}else{if(!this.prototype.callbacks[a] instanceof Array){this.prototype.callbacks[a]=[this.prototype.callbacks[a]]}}this.prototype.callbacks[a].push(b);return this}},prototype:{callbacks:null,initCallbacks:function initCallbacks(a){if(!this.hasOwnProperty("callbacks")){this.callbacks=new Callbacks(this)}if(a){this.callbacks.types=a}},destroyCallbacks:function destroyCallbacks(){if(this.callbacks){this.callbacks.destructor();this.callbacks=null}}}};Module.Utils={include:function(a){if(Module.Base){Module.Base.include(a)}}};Module.Utils.Bootstrap={includes:[Callbacks.Utils],included:function(d){var c=d.prototype;if(c.initialize!==Module.Utils.Bootstrap.prototype.initialize){c._originalInitialize=c.initialize||function b(){};c.initialize=Module.Utils.Bootstrap.prototype.initialize}else{c.initialize=function b(){}}if(c.init!==Module.Utils.Bootstrap.prototype.init){c._originalInit=c.init||function a(){};c.init=Module.Utils.Bootstrap.prototype.init}else{c.init=function a(){}}if(c.destructor!==Module.Utils.Bootstrap.prototype.destructor){c._originalDestructor=c.destructor||function e(){};c.destructor=Module.Utils.Bootstrap.prototype.destructor}else{c.destructor=function e(){}}c=null},prototype:{initialize:function(){this._originalInitialize.call(this);this.setOptions(this.mergeProperty("options"))},init:function(a,b){this._originalInit.call(this,a,b);this.initCallbacks(this.mergeProperty("callbacks"));this.callbacks.execute("beforeReady");this._ready();this.callbacks.execute("afterReady");if(!this._isLoading){this._loaded()}return this},destructor:function(a){this.callbacks.execute("destroy",a);this.destroyCallbacks();this._originalDestructor.call(this,a)},_ready:function(){},cancel:function(b,a,c){b.stop();this.destructor();b=a=c=null}}};Module.Utils.include(Module.Utils.Bootstrap);Module.Utils.PropertyCache={self:{cache:null,fromCache:function(){var d=Object.prototype.toString,a=function(e){return d.call(e)==="[object Array]"};function c(f,m,j,e){var g,l,h,k;for(g in m){if(m.hasOwnProperty(g)){l=m[g];if(a(l)){if(!f[g]){f[g]=l}else{f[g]=f[g]||[];for(h=0,k=l.length;h<k;h++){if(f[g].indexOf(l[h])<0){f[g].unshift(l[h])}}}}else{if(!f.hasOwnProperty(g)){f[g]=m[g]}}}}}return function b(g,e,j,f){this.cache=this.cache||{};if(this.cache[g]){return this.cache[g]}if(!j){j=c;f=this}else{f=f||null}var h=this.prototype,i={};while(h){if(h.hasOwnProperty(e)&&h[e]){j.call(f,i,h[e],g,this)}h=h.__proto__}return(this.cache[g]=i)}}()},prototype:{mergeProperty:function mergeProperty(a,d,c){var b=this.guid?this.guid+"."+a:a;return this.constructor.fromCache(b,a,d,c)}}};Module.Utils.include(Module.Utils.PropertyCache);Module.Utils.Rendering={included:function(a){a.addCallback("destroy","_destroyRenderingEngine")},prototype:{renderingEngine:null,_destroyRenderingEngine:function _destroyRenderingEngine(){this.renderingEngine=null},render:function render(b,c,a){return this.renderingEngine.render(b,c,a)}}};Module.Utils.include(Module.Utils.Rendering);
/*! module-utils 2014-05-14 */
;function ElementStore(){}ElementStore.prototype={_cache:null,config:null,_document:null,returnNative:false,_root:null,constructor:ElementStore,init:function init(a){if(!a){throw new Error("Missing required argument: root")}this.config=this.config||{elements:{},collections:{}};this._cache={};this.setRoot(a);if(!this.createElement){this.createElement=this._createElement}if(!this.parseHTML){this.parseHTML=this._parseHTML}if(!this.querySelector){this.querySelector=this._querySelector}if(!this.querySelectorAll){this.querySelectorAll=this._querySelectorAll}this.eagerLoad();return this},destructor:function destructor(){if(this._cache){this.clearCache();this._cache=null}this.config=this._root=this._document=null},clearCache:function clearCache(){var a;for(a in this._cache){if(this._cache.hasOwnProperty(a)){this._cache[a]=null}}return this},_createElement:function _createElement(a){return this._document.createElement(a)},eagerLoad:function eagerLoad(){var b,a;for(b in this.config.elements){if(this.config.elements.hasOwnProperty(b)){a=this.config.elements[b];if(a.eager&&!a.nocache){this._cache[b]=this.getElement(b)}}}for(b in this.config.collections){if(this.config.collections.hasOwnProperty(b)){a=this.config.collections[b];if(a.eager&&!a.nocache){this.getCollection(b)}}}return this},get:function get(a){return this.getElement(a)||this.getCollection(a)||null},getCollection:function getCollection(a){var b;if(!this.config.collections[a]){b=null}else{if(this._cache[a]){b=this._cache[a]}else{if(this.config.collections[a].selector){b=this.querySelectorAll(this.config.collections[a].selector);if(!this.config.collections[a].nocache){this._cache[a]=b}}else{throw new Error('Missing required config "selector" for collection '+a)}}}return b},getElement:function getElement(b){var a;if(!this.config.elements[b]){a=null}else{if(this._cache[b]){a=this._cache[b]}else{if(this.config.elements[b].selector){a=this.querySelector(this.config.elements[b].selector);if(!this.config.elements[b].nocache){this._cache[b]=a}}else{throw new Error('Missing required config "selector" for element '+b)}}}return a},isCollection:function isCollection(a){return this.config.collections.hasOwnProperty(a)},isElement:function isElement(a){return this.config.elements.hasOwnProperty(a)},keys:function keys(){var b=[],a;for(a in this.config.elements){if(this.config.elements.hasOwnProperty(a)){b.push(a)}}for(a in this.config.collections){if(this.config.collections.hasOwnProperty(a)){b.push(a)}}return b},_mergeConfigs:function _mergeConfigs(a,c,b){for(key in c){if(c.hasOwnProperty(key)&&(a[key]===undefined||!b)){a[key]=c[key]}}},_parseHTML:function _parseHTML(b){b=b.replace(/^\s+|\s+$/g,"");var d=this.createElement("div");d.innerHTML=b;var c=[],a=d.childNodes.length;while(a--){c.push(d.childNodes[a]);d.removeChild(d.childNodes[a])}d=null;return c},setConfig:function setConfig(b,a){this.config=this.config||{elements:{},collections:{}};if(b.elements){this._mergeConfigs(this.config.elements,b.elements,a)}if(b.collections){this._mergeConfigs(this.config.collections,b.collections,a)}return this},setRoot:function setRoot(a){this.clearCache();this._root=a;this._document=this._root.nodeName==="#document"?this._root:this._root.ownerDocument;return this},toString:function toString(){return"[object ElementStore]"},_querySelector:function _querySelector(a,b){return(b||this._root).querySelector(a)},_querySelectorAll:function _querySelectorAll(a,b){return(b||this._root).querySelectorAll(a)}};ElementStore.Utils={prototype:{elementStore:{},destroyElementStore:function destroyElementStore(){if(this.elementStore){this.elementStore.destructor();this.elementStore=null}},initElementStore:function initElementStore(a){if(!this.hasOwnProperty("elementStore")){this.elementStore=new ElementStore()}this._compileElementStore();this._initGetters();this.elementStore.init(a)},_initGetters:function _initGetters(){if(this.__proto__.hasOwnProperty("__elementStoreGettersCreated__")){return}var b,a,d=this.__proto__;var e=this.elementStore.config.elements;var c=this.elementStore.config.collections;if(!this.createElementGetter){this.createElementGetter=this._createElementGetter}if(!this.createCollectionGetter){this.createCollectionGetter=this._createCollectionGetter}for(b in e){if(e.hasOwnProperty(b)){if(!d[b]){a=b}else{if(!d[b+"Element"]){a=b+"Element"}else{throw new Error("Cannot create element getter: "+b)}}this.createElementGetter(b,a)}}for(b in c){if(c.hasOwnProperty(b)){if(!d[b]){a=b}else{if(!d[b+"Collection"]){a=b+"Collection"}else{throw new Error("Cannot create collection getter: "+b)}}this.createCollectionGetter(b,a)}}d.__elementStoreGettersCreated__=true;e=c=d=null},clearElementStoreCache:function clearElementStoreCache(){this.elementStore.clearCache()},collection:function collection(a){return this.elementStore.getCollection(a)},_compileElementStore:function _compileElementStore(){if(this.__proto__.hasOwnProperty("_compiledElementStore")){this.elementStore.setConfig(this.__proto__._compiledElementStore);return}var a=this.__proto__;while(a){if(a.hasOwnProperty("elementStore")){this.elementStore.setConfig(a.elementStore,true)}a=a.__proto__}this.__proto__._compiledElementStore=this.elementStore.config},_createCollectionGetter:function _createCollectionGetter(c,b){var a=function d(){return this.elementStore.getCollection(c)};this.__proto__[b]=a},_createElementGetter:function _createElementGetter(c,b){var a=function d(){return this.elementStore.getElement(c)};this.__proto__[b]=a},element:function element(a){return this.elementStore.getElement(a)}}};Module.Utils.ElementStore={includes:[ElementStore.Utils],included:function(a){a.addCallback("beforeReady","_initElementStore");a.addCallback("destroy","destroyElementStore")},prototype:{_initElementStore:function _initElementStore(){this.initElementStore(this.element)}}};Module.Utils.include(Module.Utils.ElementStore);
/*! module-utils 2014-05-14 */
(function(){function b(f,e){if(e.self){d(e.self,f,true)}if(e.prototype){d(e.prototype,f.prototype,true)}if(e.included){e.included(f)}}function d(i,e,h){var f,g;for(f in i){if(i.hasOwnProperty(f)&&(!h||e[f]===g)){e[f]=i[f]}}i=e=null}var c={setup:function a(e){if(c.ApplicationEvents){b(e,c.ApplicationEvents);if(c.Notifications){b(e,c.Notifications)}}}};window.Beacon=c})();Beacon=(function(h){function b(){this._subscribers={}}b.prototype={_subscribers:null,constructor:b,destructor:function c(){if(!this._subscribers){return}var n=this._subscribers,l,k,j,m;for(k in n){if(n.hasOwnProperty(k)){for(j=0,m=n[k].length;j<m;j++){l=n[k][j];l.callback=l.context=null}n[k]=null}}l=n=this._subscribers=null},_dispatchEvent:function g(n,o,p){var l,j,k=0,m=p.length;for(k;k<m;k++){l=p[k];if(l.type==="function"){j=l.callback.call(l.context,n,o)}else{if(l.type==="string"){j=l.context[l.callback](n,o)}}if(j===false){break}}p=l=n=o=null;return j!==false},publish:function e(j,k,l){if(!this._subscribers[j]){return true}var i=this._dispatchEvent(k,l,this._subscribers[j]);k=l=null;return i},subscribe:function a(k,j,m){var i=typeof j;var l=typeof m;this._subscribers[k]=this._subscribers[k]||[];if(i==="function"){this._subscribers[k].push({context:null,callback:j,type:"function"})}else{if(i==="object"){if(l==="string"&&typeof j[m]!=="function"){throw new Error("Cannot subscribe to "+k+" because "+m+" is not a function")}this._subscribers[k].push({context:j||null,callback:m,type:l})}}},unsubscribe:function f(m,l,q){if(this._subscribers[m]){var j=typeof l,p=typeof q,o=this._subscribers[m],k=o.length,n;if(j==="function"){q=l;l=null;p="function"}else{if(j==="object"&&p==="undefined"){p="any"}}while(k--){n=o[k];if((p==="any"&&n.context===l)||(n.type===p&&n.context===l&&n.callback===q)){o.splice(k,1)}}o=n=null}l=q=null},unsubscribeAll:function d(k){var l,j,m;for(l in this._subscribers){if(this._subscribers.hasOwnProperty(l)){m=this._subscribers[l];j=m.length;while(j--){if(m[j].context===k){m.splice(j,1)}}}}k=m=null}};h.Dispatcher=b;return h})(window.Beacon||{});Beacon=(function(f){var h={eventDispatcher:null,self:{getEventDispatcher:function b(){if(!f.ApplicationEvents.eventDispatcher){f.ApplicationEvents.eventDispatcher=new f.Dispatcher()}return f.ApplicationEvents.eventDispatcher},publish:function d(i,j,k){return this.getEventDispatcher().publish(i,j,k)},subscribe:function a(i,j,k){this.getEventDispatcher().subscribe(i,j,k)},unsubscribe:function e(i,j,k){this.getEventDispatcher().unsubscribe(i,j,k)}},prototype:{eventDispatcher:null,_initApplicationEvents:function g(){if(!this.hasOwnProperty("eventDispatcher")){this.eventDispatcher=this.constructor.getEventDispatcher()}},_destroyApplicationEvents:function c(){if(this.eventDispatcher){this.eventDispatcher.unsubscribe(this)}},publish:function d(i,j){return this.eventDispatcher.publish(i,this,j)},subscribe:function a(i,j,k){this.eventDispatcher.subscribe(i,j,k);return this},unsubscribe:function e(i,j,k){this.eventDispatcher.unsubscribe(i,j,k);return this}}};f.ApplicationEvents=h;return f})(window.Beacon||{});Beacon=(function(a){var g=0;var h={self:{addNotifications:function b(n){var m,l=this.prototype.notifications||{};for(m in n){if(n.hasOwnProperty(m)){if(l[m]){l[m]=(l[m] instanceof Array)?l[m]:[l[m]]}else{l[m]=[]}l[m].push(n[m])}}this.prototype.notifications=l;l=n=null}},prototype:{_notificationDispatcher:null,_notificationId:null,_notificationIdPrefix:"notifications",notifications:null,_initNotifications:function d(){if(!this.__proto__.hasOwnProperty("_compiledNotifications")){this._compileNotifications()}this._initApplicationEvents();this._notificationId=g++;var m,n,o,l;for(m in this._compiledNotifications){if(this._compiledNotifications.hasOwnProperty(m)){l=this._compiledNotifications[m];for(n=0,o=l.length;n<o;n++){this.listen(m,this,l[n])}}}this._setUpNotifications()},_compileNotifications:function k(){var q={},m,n,p,l,o=this.__proto__;while(o){if(o.hasOwnProperty("notifications")&&o.notifications){l=o.notifications;for(m in l){if(l.hasOwnProperty(m)){q[m]=q[m]||[];l[m]=l[m] instanceof Array?l[m]:[l[m]];n=l[m].length;while(n--){q[m].unshift(l[m][n])}}}}o=o.__proto__}this.__proto__._compiledNotifications=q;o=l=q=null},_destroyNotifications:function f(){if(this._notificationDispatcher){this._notificationDispatcher.destructor();this._notificationDispatcher=null}},_setUpNotifications:function c(){},notify:function j(l,m){var n=this.publish(this._notificationIdPrefix+"."+this._notificationId+"."+l,m);m=null;return n},listen:function e(m,l,n){this.subscribe(this._notificationIdPrefix+"."+this._notificationId+"."+m,l,n);l=n=null;return this},ignore:function i(m,l,n){this.unsubscribe(this._notificationIdPrefix+"."+this._notificationId+"."+m,l,n);l=n=null;return this}}};a.Notifications=h;return a})(window.Beacon||{});Module.Utils.Events={included:function(a){Beacon.setup(a);a.addCallback("beforeReady","_initApplicationEvents");if(Beacon.Notifications){a.addCallback("beforeReady","_initNotifications")}}};Module.Utils.include(Module.Utils.Events);
/*! bloodhound 2014-05-14 */
(function(){function a(j,i){if(i in j.prototype){throw new Error("A callback named '"+i+"' has already been defined")}j.prototype[i]=function h(l,k){if(this._pendingCallbacks[i]){var m=this._pendingCallbacks[i];l.apply(k||this.ctx||null,m.args);this._pendingCallbacks[i]=m=null}else{this._callbacks[i]={fn:l,context:k||null}}return this}}function g(h){this.promiser=h||null;this.ctx=null;this._callbacks={};this._pendingCallbacks={}}g.create=function e(h,j){if(!arguments.length){throw new Error("Missing required argument: callbackNames (Array<String>)")}else{if(!j){j=h;h=g}}function n(){h.apply(this,arguments)}n.create=function l(i){return g.create(n,i)};n.prototype=new h();n.prototype.constructor=n;for(var k=0,m=j.length;k<m;k++){a(n,j[k])}return n};g.prototype={_callbacks:null,_pendingCallbacks:null,promiser:null,constructor:g,destructor:function b(){var h;if(this._callbacks){for(h in this._callbacks){if(!this._callbacks.hasOwnProperty(h)){continue}this._callbacks[h]=null}this._callbacks=null}if(this._pendingCallbacks){for(h in this._pendingCallbacks){if(!this._pendingCallbacks.hasOwnProperty(h)){continue}this._pendingCallbacks[h]=null}this._pendingCallbacks=null}this.promiser=null},callbackDefined:function f(h){return(this.__proto__[h]&&this.__proto__[h].name==="__PromiseCallback")?true:false},context:function d(h){this.ctx=h;return this},fulfill:function c(){if(arguments.length===0){throw new Error("The first argument to Promise#fulfill must be the name of the promise to fulfill")}var i=arguments[0],j=this._callbacks[i],h=Array.prototype.slice.call(arguments,1,arguments.length)||[];h.push(this.promiser,this);if(j){j.fn.apply(j.context||this.ctx||null,h)}else{this._pendingCallbacks[i]={args:h}}return this}};window.Promise=g})();(function(){var a={Adapters:{},RenderingEngines:{},ViewProviders:{},ViewResolvers:{},RenderPromise:Promise.create(["done"])};window.Bloodhound=a})();
/*! bloodhound 2014-05-14 */
(function(){function a(c){this.viewResolver=c||null}a.prototype.viewResolver=null;a.prototype.render=function b(d,f,c){var h=new Bloodhound.RenderPromise(this),e=null,g=this.viewResolver.getDocument();if(c){if(typeof c==="string"){e=g.getElementById(c);if(!e){throw new Error("Failed to find element '"+c+"' in document: "+(g.documentURI||g.location))}}else{e=c}}this.viewResolver.find(d,function(j){var i=j.render(f);if(e){e.innerHTML=i}h.fulfill("done",i,j,e);e=j=f=null});return h};Bloodhound.RenderingEngines.DynamicRenderingEngine=a})();(function(){function a(j,r){this.httpMethod="GET";this.httpMethodAttribute="data-template-method";this.templateNameAttribute="data-template-name";this.templateExtension=".tpl";this.templateUrlAttribute="data-template-url";this.templateUrlBase="/js/app/views";this.addTemplate=p;this.find=l;this.getDocument=m;this.getTemplate=s;this.getTemplateCache=f;this.setContainer=g;this.setProvider=b;var t={},i=null,e=null,h={},k=this;function c(u,v){if(u){this.setContainer(u)}if(v){this.setProvider(v)}}function p(u,v){if(t[u]){throw new Error("A template named '"+u+"' already exists.")}t[u]=v}function n(w,B,z){if(t[w]){B.call(z||null,t[w]);return}var A=q(w),x=A.url,u=A.method,C=new XMLHttpRequest();var v=function v(){if(C.readyState!==4){return}else{if(C.status===200){o(C.responseText,function(){t[w]=e.createTemplate(w,C.responseText);B.call(z||null,t[w]);y()})}else{y();throw new Error("Request to fetch template '"+w+"' from URL '"+u+" "+x+"' failed with status: "+this.status)}}};var y=function y(){C.onreadystatechange=null;C=B=z=A=null};C.onreadystatechange=v;C.open(u,x);C.setRequestHeader("X-Requested-With","XMLHttpRequest");C.send(null)}function o(x,y){var w=0;var u=function(z){w--;v();z=null};var v=function(){if(!w){y.call();y=u=v=null}};e.forEachSubTemplate(x,function(z){w++;n(z,u)});v()}function l(u,x,v){v=v||null;if(t[u]){if(x){x.call(v,t[u]);return}else{return t[u]}}else{if(!x){throw new Error("Cannot find uncached template: "+u)}}var w=d(u);if(w&&!w.getAttribute(k.templateUrlAttribute)){o(w.innerHTML,function(){t[u]=e.createTemplate(u,w.innerHTML);x.call(v,t[u])})}else{n(u,function(y){x.call(v,y)})}}function m(){return i.ownerDocument||i}function d(w,v){v=v||i;if(h[w]){return h[w]}var u=v.getElementsByTagName("script"),x=u.length;while(x--){if(u[x].getAttribute(k.templateNameAttribute)===w){h[w]=u[x];break}}u=v=null;return h[w]||null}function s(u){return t[u]||null}function f(){return t}function q(v){var u="",x=k.httpMethod,w=d(v);if(w){u=w.getAttribute(k.templateUrlAttribute);if(!u){throw new Error("Missing required attribute "+k.templateUrlAttribute+" on <script type='text/html' "+k.templateNameAttribute+"='"+v+"' />")}x=w.getAttribute(k.httpMethodAttribute)||k.httpMethod}else{u=k.templateUrlBase+(/^\//.test(v)?v:"/"+v)+k.templateExtension}u+=(/^\?/.test(u)?"&":"?")+"__cache__="+a.cacheBuster;return{url:u,method:x.toUpperCase()}}function g(u){i=typeof u==="string"?document.getElementById(u):u}function b(u){e=u;e.viewResolver=k}c.call(this,j,r)}a.cacheBuster=new Date().getTime();Bloodhound.ViewResolvers.DynamicViewResolver=a})();
/*! bloodhound 2014-05-14 */
(function(){function c(f,g){this.partials=[];this.name=f||null;if(g){this.setSource(g)}}c.prototype={name:null,partials:null,source:null,viewResolver:null,constructor:c,getPartials:function e(h){if(!this.partials.length){return null}h=h||{};var f,j,g=0,k=this.partials.length;for(g;g<k;g++){f=this.partials[g];j=this.viewResolver.find(f);h[f]=j.source;j.getPartials(h)}return h},render:function b(f){return Mustache.render(this.source,f,this.getPartials())},setSource:function d(g){var f=this.partials;this.source=g;g.replace(/\{\{>\s*([-\w.\/]+)\s*\}\}/g,function(h,i){f.push(i)})},setViewResolver:function a(f){this.viewResolver=f;f=null}};Bloodhound.Adapters.MustacheTemplate=c})();(function(){var d=/\{\{>\s*([-\w\/.]+)/g;function b(e){this.viewResolver=e||null;e=null}b.prototype.createTemplate=function c(e,g){var f=new Bloodhound.Adapters.MustacheTemplate(e,g);f.viewResolver=this.viewResolver;return f};b.prototype.forEachSubTemplate=function a(f,g,e){f.replace(d,function(h,i){g.call(e,i)})};Bloodhound.ViewProviders.MustacheViewProvider=b})();